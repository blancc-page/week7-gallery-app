{% extends 'gallery/base.html' %}

{% block content %}

{% if images %}

<div class="gallery-container">
	<div class="row d-flex flex-wrap align-items-center" data-toggle="modal" data-target="#lightbox">
    {% for image in images %}
		<div class="col-12 col-md-6 col-lg-3">
			<img class="murigi" src="{{image.image.url}}" data-id="{{image.image.url}}" data-target="#lightbox" data-slide-to="{{image.id}}" alt="{{image.name}}" data-title="{{image.name}}" data-desc="{{image.description}}"/> 
	  	</div>
    {% endfor %}
	</div>
  
{% endif %}
	
	<!-- Modal -->
	<div class="modal fade" id="lightbox" role="dialog" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
		<div class="modal-content">
			<button type="button" class="close text-right p-2" data-dismiss="modal" aria-label="Close">
			  <span aria-hidden="true">&times;</span>
			</button>
		  <div id="indicators" class="carousel slide" data-interval="false">
	  <ol class="carousel-indicators">
		<li data-target="#indicators" data-slide-to="{{image.id}}" class="active"></li>
	  </ol>
	  <div class="carousel-inner">
		
		<div class="carousel-item active">
		  
		  <img class="d-block w-100" id="mercy" alt="Slide No. {{image.id}}">
		</div>
	  </div>
	  <a class="carousel-control-prev" href="#indicators" role="button" data-slide="prev">
		<span class="carousel-control-prev-icon" aria-hidden="true"></span>
		<span class="sr-only">Previous</span>
	  </a>
	  <a class="carousel-control-next" href="#indicators" role="button" data-slide="next">
		<span class="carousel-control-next-icon" aria-hidden="true"></span>
		<span class="sr-only">Next</span>
	  </a>
	</div>
  <h1 class="modal-title" id="modalTitle"></h1>
  <p class="modal-desc" id="modalDesc"></p>
		</div>
	  </div>
	</div>

 </div>

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

 <script>
   $(".murigi").click(function(){
     var imgSource = $(this).data("id");
     $("#mercy").attr("src", imgSource)
     console.log("working");
     $("#modalTitle").html($(this).data("title"));
     $("#modalDesc").html($(this).data("desc"));
   });

 </script>

{%endblock%}